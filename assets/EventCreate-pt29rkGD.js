import{_ as x,r as y,k as D,c as d,a as t,l as i,v as p,m as k,F as b,d as _,o as u,t as c,u as $,y as A,j as T}from"./index-DEp-dIaY.js";const F={class:"event-management"},I={class:"create-form"},M={class:"form-content"},S={class:"form-item"},B={class:"form-item"},P={class:"form-item"},N={class:"form-item"},j=["onUpdate:modelValue"],q=["onUpdate:modelValue"],L=["onUpdate:modelValue"],O=["onClick"],R={class:"form-actions"},z=["disabled"],G={class:"event-list"},H=["onClick"],J=["onClick"],K=["onClick"],Q={__name:"EventCreate",setup(W){const v=T(),l=y({name:"",description:"",type:"custom",properties:[]}),r=y([{id:1,name:"view_product",description:"用户查看商品详情",type:"pv",properties:[{key:"product_id",type:"string",description:"商品ID"},{key:"category",type:"string",description:"商品分类"},{key:"price",type:"number",description:"商品价格"}],createdAt:"2024-01-10T08:30:00"},{id:2,name:"add_to_cart",description:"用户添加商品到购物车",type:"click",properties:[{key:"product_id",type:"string",description:"商品ID"},{key:"quantity",type:"number",description:"添加数量"}],createdAt:"2024-01-12T15:20:00"},{id:3,name:"start_checkout",description:"用户开始结算",type:"custom",properties:[{key:"total_amount",type:"number",description:"总金额"},{key:"item_count",type:"number",description:"商品数量"},{key:"is_first_purchase",type:"boolean",description:"是否首次购买"}],createdAt:"2024-01-14T11:45:00"}]),m=D(()=>l.value.name&&l.value.description&&l.value.type&&l.value.properties.every(o=>o.key&&o.type&&o.description)),f=()=>{l.value.properties.push({key:"",type:"string",description:""})},g=o=>{l.value.properties.splice(o,1)},h=()=>{if(!m.value)return;const o={id:r.value.length+1,...l.value,createdAt:new Date().toISOString()};r.value.push(o),C()},C=()=>{l.value={name:"",description:"",type:"custom",properties:[]}},V=o=>({pv:"页面浏览",click:"点击事件",custom:"自定义事件"})[o]||o,E=o=>{v.push(`/track/detail/${o.id}`)},U=o=>{v.push(`/track/edit/${o.id}`)},w=o=>{confirm("确定要删除这个事件吗？")&&(r.value=r.value.filter(e=>e.id!==o))};return(o,e)=>(u(),d("div",F,[e[13]||(e[13]=t("div",{class:"page-header"},[t("h2",null,"事件管理")],-1)),t("div",I,[e[10]||(e[10]=t("h3",null,"创建埋点事件",-1)),t("div",M,[t("div",S,[e[3]||(e[3]=t("label",null,"事件名称",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.name=n),type:"text",placeholder:"例如：view_product"},null,512),[[p,l.value.name]]),e[4]||(e[4]=t("small",null,"使用下划线命名，例如：click_button, view_page",-1))]),t("div",B,[e[5]||(e[5]=t("label",null,"事件描述",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.description=n),type:"text",placeholder:"例如：用户查看商品详情"},null,512),[[p,l.value.description]])]),t("div",P,[e[7]||(e[7]=t("label",null,"事件类型",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.type=n)},e[6]||(e[6]=[t("option",{value:"pv"},"页面浏览(PV)",-1),t("option",{value:"click"},"点击事件",-1),t("option",{value:"custom"},"自定义事件",-1)]),512),[[k,l.value.type]])]),t("div",N,[e[9]||(e[9]=t("label",null,"事件属性",-1)),(u(!0),d(b,null,_(l.value.properties,(n,a)=>(u(),d("div",{key:a,class:"property-item"},[i(t("input",{"onUpdate:modelValue":s=>n.key=s,type:"text",placeholder:"属性名"},null,8,j),[[p,n.key]]),i(t("select",{"onUpdate:modelValue":s=>n.type=s},e[8]||(e[8]=[t("option",{value:"string"},"字符串",-1),t("option",{value:"number"},"数字",-1),t("option",{value:"boolean"},"布尔值",-1)]),8,q),[[k,n.type]]),i(t("input",{"onUpdate:modelValue":s=>n.description=s,type:"text",placeholder:"属性描述"},null,8,L),[[p,n.description]]),t("button",{class:"remove-btn",onClick:s=>g(a)},"删除",8,O)]))),128)),t("button",{class:"add-btn",onClick:f},"添加属性")]),t("div",R,[t("button",{class:"submit-btn",onClick:h,disabled:!m.value},"创建事件",8,z)])])]),t("div",G,[e[12]||(e[12]=t("h3",null,"已创建的事件",-1)),t("table",null,[e[11]||(e[11]=t("thead",null,[t("tr",null,[t("th",null,"事件名称"),t("th",null,"事件描述"),t("th",null,"事件类型"),t("th",null,"创建时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(u(!0),d(b,null,_(r.value,n=>(u(),d("tr",{key:n.id},[t("td",null,c(n.name),1),t("td",null,c(n.description),1),t("td",null,c(V(n.type)),1),t("td",null,c($(A)(n.createdAt)),1),t("td",null,[t("button",{class:"action-btn view-btn",onClick:a=>E(n)},"查看",8,H),t("button",{class:"action-btn edit-btn",onClick:a=>U(n)},"编辑",8,J),t("button",{class:"action-btn delete-btn",onClick:a=>w(n.id)},"删除",8,K)])]))),128))])])])]))}},Y=x(Q,[["__scopeId","data-v-412cf2d2"]]);export{Y as default};
