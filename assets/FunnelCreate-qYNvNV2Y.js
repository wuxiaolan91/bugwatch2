import{_ as h,r as v,k as b,c as u,a as e,l as c,v as i,F as g,d as y,o as d,t as V,i as C,j as w}from"./index-Lnb-9Fda.js";const F={class:"funnel-create"},U={class:"funnel-form"},x={class:"form-group"},T={class:"funnel-steps"},B={class:"step-header"},N={class:"step-number"},S=["onClick"],$=["onUpdate:modelValue","placeholder"],j=["onUpdate:modelValue","placeholder"],D={class:"form-actions"},E=["disabled"],q={__name:"FunnelCreate",setup(I){const m=w(),o=v(""),s=v([{name:"",event:""},{name:"",event:""}]),_=()=>{s.value.push({name:"",event:""})},f=l=>{s.value.splice(l,1)},p=b(()=>o.value?s.value.every(l=>l.name&&l.event):!1),k=()=>{if(!p.value)return;new window.Tracker({requestUrl:"/api/track",historyTracker:!0,domTracker:!0,jsError:!0}).createFunnel(o.value,s.value.map(t=>t.event)),m.push("/funnel/list")};return(l,t)=>(d(),u("div",F,[t[5]||(t[5]=e("h2",null,"创建漏斗",-1)),e("div",U,[e("div",x,[t[1]||(t[1]=e("label",null,"漏斗名称",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.value=n),type:"text",placeholder:"请输入漏斗名称",class:"form-control"},null,512),[[i,o.value]]),t[2]||(t[2]=e("small",{class:"help-text"},"例如：注册转化漏斗",-1))]),e("div",T,[t[3]||(t[3]=e("h3",null,"漏斗步骤",-1)),t[4]||(t[4]=e("div",{class:"help-text"},[e("p",null,"事件名必须与代码中 track() 方法追踪的事件名完全一致"),e("p",null,"例如：view_register_page, start_register, submit_form 等")],-1)),(d(!0),u(g,null,y(s.value,(n,a)=>(d(),u("div",{key:a,class:"step-item"},[e("div",B,[e("span",N,"步骤 "+V(a+1),1),s.value.length>2?(d(),u("button",{key:0,onClick:r=>f(a),class:"remove-btn"}," 删除 ",8,S)):C("",!0)]),c(e("input",{"onUpdate:modelValue":r=>n.name=r,type:"text",placeholder:`请输入步骤${a+1}名称（例如：查看注册页）`,class:"form-control"},null,8,$),[[i,n.name]]),c(e("input",{"onUpdate:modelValue":r=>n.event=r,type:"text",placeholder:`请输入步骤${a+1}对应的事件名（例如：view_register_page）`,class:"form-control"},null,8,j),[[i,n.event]])]))),128)),e("button",{onClick:_,class:"add-btn"}," 添加步骤 ")]),e("div",D,[e("button",{onClick:k,class:"save-btn",disabled:!p.value}," 保存漏斗 ",8,E)])])]))}},M=h(q,[["__scopeId","data-v-2d01bc09"]]);export{M as default};
