import{_ as V,r as x,k as U,q as g,c as a,a as e,l as i,v as r,m as v,F as q,d as E,o as d,B as h,f as C,i as w,A as B,j as I}from"./index-DEp-dIaY.js";const M={class:"event-edit"},D={class:"edit-form"},F={class:"form-content"},N={class:"form-item"},j={class:"form-item"},P={class:"form-item"},R={class:"form-item"},T={class:"properties-list"},A=["onUpdate:modelValue"],L=["onUpdate:modelValue"],S=["onUpdate:modelValue"],$={class:"required-checkbox"},z=["onUpdate:modelValue"],G=["onClick"],H={class:"form-actions"},J=["disabled"],K={__name:"EventEdit",setup(O){const m=B(),u=I(),o=x({name:"",description:"",type:"custom",properties:[]}),p=U(()=>o.value.name&&o.value.description&&o.value.type&&o.value.properties.every(l=>l.key&&l.type&&l.description)),y=()=>{o.value.properties.push({key:"",type:"string",description:"",required:!1})},_=l=>{o.value.properties.splice(l,1)},k=async()=>{const t={id:m.params.id,name:"view_product",description:"用户查看商品详情",type:"pv",properties:[{key:"product_id",type:"string",description:"商品ID",required:!0},{key:"category",type:"string",description:"商品分类",required:!1},{key:"price",type:"number",description:"商品价格",required:!0}]};o.value={...t}},b=async()=>{if(p.value)try{console.log("保存事件:",o.value),u.push("/track/list")}catch(l){console.error("保存失败:",l)}},f=()=>{u.back()};return g(()=>{k()}),(l,t)=>(d(),a("div",M,[t[11]||(t[11]=e("div",{class:"page-header"},[e("h2",null,"编辑事件")],-1)),e("div",D,[e("div",F,[e("div",N,[t[3]||(t[3]=e("label",null,"事件名称",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.name=s),type:"text",placeholder:"例如：view_product"},null,512),[[r,o.value.name]]),t[4]||(t[4]=e("small",null,"使用下划线命名，例如：click_button, view_page",-1))]),e("div",j,[t[5]||(t[5]=e("label",null,"事件描述",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.description=s),type:"text",placeholder:"请输入事件描述"},null,512),[[r,o.value.description]])]),e("div",P,[t[7]||(t[7]=e("label",null,"事件类型",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.type=s)},t[6]||(t[6]=[e("option",{value:"pv"},"页面浏览",-1),e("option",{value:"click"},"点击事件",-1),e("option",{value:"custom"},"自定义事件",-1)]),512),[[v,o.value.type]])]),e("div",R,[t[10]||(t[10]=e("label",null,"事件属性",-1)),e("div",T,[(d(!0),a(q,null,E(o.value.properties,(s,c)=>(d(),a("div",{key:c,class:"property-item"},[i(e("input",{"onUpdate:modelValue":n=>s.key=n,type:"text",placeholder:"属性名"},null,8,A),[[r,s.key]]),i(e("select",{"onUpdate:modelValue":n=>s.type=n},t[8]||(t[8]=[e("option",{value:"string"},"字符串",-1),e("option",{value:"number"},"数字",-1),e("option",{value:"boolean"},"布尔值",-1),e("option",{value:"object"},"对象",-1)]),8,L),[[v,s.type]]),i(e("input",{"onUpdate:modelValue":n=>s.description=n,type:"text",placeholder:"属性描述"},null,8,S),[[r,s.description]]),e("label",$,[i(e("input",{type:"checkbox","onUpdate:modelValue":n=>s.required=n},null,8,z),[[h,s.required]]),t[9]||(t[9]=C(" 必填 "))]),o.value.properties.length>1?(d(),a("button",{key:0,class:"remove-btn",onClick:n=>_(c)}," 删除 ",8,G)):w("",!0)]))),128))]),e("button",{class:"add-btn",onClick:y},"添加属性")]),e("div",H,[e("button",{class:"cancel-btn",onClick:f},"取消"),e("button",{class:"save-btn",onClick:b,disabled:!p.value},"保存",8,J)])])])]))}},W=V(K,[["__scopeId","data-v-9429d4d7"]]);export{W as default};
